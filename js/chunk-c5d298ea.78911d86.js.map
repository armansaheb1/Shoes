{"version":3,"sources":["webpack:///./node_modules/vue-cropper/src/vue-cropper.vue?7fa4","webpack:///./node_modules/vue-cropper/src/exif-js-min.js","webpack:///node_modules/vue-cropper/src/vue-cropper.vue","webpack:///./node_modules/vue-cropper/src/vue-cropper.vue?fd03","webpack:///./node_modules/vue-cropper/src/vue-cropper.vue","webpack:///./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack:///./node_modules/vue-cropper/src/vue-cropper.vue?3e54","webpack:///./src/components/ui/VueCropper.vue?e199","webpack:///./node_modules/core-js/modules/es.array-buffer.constructor.js","webpack:///./src/components/ui/VueCropper.vue?8700","webpack:///src/components/ui/VueCropper.vue","webpack:///./src/components/ui/VueCropper.vue?9b6d","webpack:///./src/components/ui/VueCropper.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","on","scaleImg","cancelScale","directives","name","rawName","value","loading","expression","style","trueWidth","trueHeight","scale","x","y","rotate","attrs","imgs","_e","_v","class","move","crop","cropping","startMove","cropW","cropH","cropOffsertX","cropOffsertY","cropMove","cropInfo","top","_s","width","height","fixedBox","$event","changeCropSize","staticRenderFns","Exif","getImageData","img","data","Promise","reslove","reject","src","test","base64ToArrayBuffer","fileReader","FileReader","onload","e","target","result","objectURLToBlob","blob","readAsArrayBuffer","http","XMLHttpRequest","status","response","open","responseType","send","url","callback","base64","replace","binary","atob","len","length","buffer","ArrayBuffer","view","Uint8Array","i","charCodeAt","getStringFromCharCode","dataView","start","str","String","fromCharCode","getUint8","getOrientation","arrayBuffer","orientation","exifIDCode","tiffOffset","firstIFDOffset","littleEndian","endianness","app1Start","ifdStart","offset","DataView","byteLength","getUint16","getUint32","getData","obj","then","catch","error","w","h","moveX","moveY","cropOldW","cropOldH","canChangeX","canChangeY","changeCropTypeX","changeCropTypeY","cropX","cropY","cropChangeX","cropChangeY","support","touches","touchNow","isIos","coe","scaling","scalingSet","coeStatus","isCanShow","props","type","Blob","File","default","outputSize","Number","outputType","info","Boolean","canScale","autoCrop","autoCropWidth","autoCropHeight","fixed","fixedNumber","Array","full","canMove","canMoveBox","original","centerBox","high","infoTrue","maxImgSize","enlarge","preW","mode","limitMinSize","computed","dpr","window","devicePixelRatio","Math","abs","toFixed","isIE","navigator","userAgent","passive","watch","checkedImg","val","reload","showPreview","goAutoCrop","methods","getVersion","arr","split","chromeVersion","checkOrientationImage","safariVersion","ctx","save","canvas","translate","PI","drawImage","restore","toBlob","clearCrop","max","onerror","substr","crossOrigin","xhr","URL","createObjectURL","preventDefault","clientX","clientY","addEventListener","moveImg","leaveImg","touchScale","cancelTouchScale","$emit","moving","axis","getImgAxis","createCrop","endCrop","offsetX","offsetY","oldTouch1","newTouch1","oldTouch2","newTouch2","oldL","sqrt","newL","cha","num","setTimeout","checkoutImgAxis","removeEventListener","changeX","nowX","changeY","nowY","$nextTick","maxLeft","maxTop","maxRight","imgW","maxBottom","imgH","x1","cropAxis","y1","x2","y2","changeSize","change","deltaY","wheelDelta","isFirefox","indexOf","changeScale","fw","fh","fixedHeight","changeCropNow","changeCropEnd","typeW","typeH","minX","minY","wrapperW","wrapperH","fixedWidth","checkCropLimitSize","limitMinNum","isArray","parseFloat","startCrop","stopCrop","leaveCrop","moveCrop","newX","newY","getCropAxis","isMove","cx","cy","getCropChecked","setCanvasSize","dx","dy","cb","s","round","getCropData","toDataURL","getCropBlob","div","transform","html","checkedMode","search","strH","scaleY","min","scaleX","str2","maxWidth","maxHeight","cw","ch","changeCrop","refresh","rotateLeft","rotateRight","rotateClear","canGo","mounted","u","isIOS","match","HTMLCanvasElement","prototype","Object","defineProperty","binStr","quality","destroyed","component","_typeof","Symbol","iterator","constructor","$","global","arrayBufferModule","setSpecies","ARRAY_BUFFER","NativeArrayBuffer","forced","_m","model","$$v","previewOpened","previewData","image","staticStyle","realTimePreview","uploadImg","previewImg","downloadImg","text","previews","metaInfo","title","components","vueCropper","$refs","cropper","aLink","document","createElement","download","href","click","file","files","alert","reader"],"mappings":"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","file":"js/chunk-c5d298ea.78911d86.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"cropper\",staticClass:\"vue-cropper\",on:{\"mouseover\":_vm.scaleImg,\"mouseout\":_vm.cancelScale}},[(_vm.imgs)?_c('div',{staticClass:\"cropper-box\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.loading),expression:\"!loading\"}],staticClass:\"cropper-box-canvas\",style:({\n\t\t\t\t\t'width': _vm.trueWidth + 'px',\n\t\t\t\t\t'height': _vm.trueHeight + 'px',\n\t\t\t\t\t'transform': 'scale(' + _vm.scale + ',' + _vm.scale + ') ' + 'translate3d('+ _vm.x / _vm.scale + 'px,' + _vm.y / _vm.scale + 'px,' + '0)'\n\t\t\t\t\t+ 'rotateZ('+ _vm.rotate * 90 +'deg)'\n\t\t\t\t\t})},[_c('img',{ref:\"cropperImg\",attrs:{\"src\":_vm.imgs,\"alt\":\"cropper-img\"}})])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"cropper-drag-box\",class:{'cropper-move': _vm.move && !_vm.crop, 'cropper-crop': _vm.crop, 'cropper-modal': _vm.cropping},on:{\"mousedown\":_vm.startMove,\"touchstart\":_vm.startMove}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.cropping),expression:\"cropping\"}],staticClass:\"cropper-crop-box\",style:({\n\t\t\t\t\t'width': _vm.cropW + 'px',\n\t\t\t\t\t'height': _vm.cropH + 'px',\n\t\t\t\t\t'transform': 'translate3d('+ _vm.cropOffsertX + 'px,' + _vm.cropOffsertY + 'px,' + '0)'\n\t\t\t\t})},[_c('span',{staticClass:\"cropper-view-box\"},[_c('img',{style:({\n\t\t\t\t\t\t'width': _vm.trueWidth + 'px',\n\t\t\t\t\t\t'height': _vm.trueHeight + 'px',\n\t\t\t\t\t\t'transform': 'scale(' + _vm.scale + ',' + _vm.scale + ') ' + 'translate3d('+ (_vm.x - _vm.cropOffsertX) / _vm.scale  + 'px,' + (_vm.y - _vm.cropOffsertY) / _vm.scale + 'px,' + '0)'\n\t\t\t\t\t\t+ 'rotateZ('+ _vm.rotate * 90 +'deg)'\n\t\t\t\t\t\t}),attrs:{\"src\":_vm.imgs,\"alt\":\"cropper-img\"}})]),_vm._v(\" \"),_c('span',{staticClass:\"cropper-face cropper-move\",on:{\"mousedown\":_vm.cropMove,\"touchstart\":_vm.cropMove}}),_vm._v(\" \"),(_vm.info)?_c('span',{staticClass:\"crop-info\",style:({'top': _vm.cropInfo.top})},[_vm._v(_vm._s(this.cropInfo.width)+\" × \"+_vm._s(this.cropInfo.height))]):_vm._e(),_vm._v(\" \"),(!_vm.fixedBox)?_c('span',[_c('span',{staticClass:\"crop-line line-w\",on:{\"mousedown\":function($event){return _vm.changeCropSize($event, false, true, 0, 1)},\"touchstart\":function($event){return _vm.changeCropSize($event, false, true, 0, 1)}}}),_vm._v(\" \"),_c('span',{staticClass:\"crop-line line-a\",on:{\"mousedown\":function($event){return _vm.changeCropSize($event, true, false, 1, 0)},\"touchstart\":function($event){return _vm.changeCropSize($event, true, false, 1, 0)}}}),_vm._v(\" \"),_c('span',{staticClass:\"crop-line line-s\",on:{\"mousedown\":function($event){return _vm.changeCropSize($event, false, true, 0, 2)},\"touchstart\":function($event){return _vm.changeCropSize($event, false, true, 0, 2)}}}),_vm._v(\" \"),_c('span',{staticClass:\"crop-line line-d\",on:{\"mousedown\":function($event){return _vm.changeCropSize($event, true, false, 2, 0)},\"touchstart\":function($event){return _vm.changeCropSize($event, true, false, 2, 0)}}}),_vm._v(\" \"),_c('span',{staticClass:\"crop-point point1\",on:{\"mousedown\":function($event){return _vm.changeCropSize($event, true, true, 1, 1)},\"touchstart\":function($event){return _vm.changeCropSize($event, true, true, 1, 1)}}}),_vm._v(\" \"),_c('span',{staticClass:\"crop-point point2\",on:{\"mousedown\":function($event){return _vm.changeCropSize($event, false, true, 0, 1)},\"touchstart\":function($event){return _vm.changeCropSize($event, false, true, 0, 1)}}}),_vm._v(\" \"),_c('span',{staticClass:\"crop-point point3\",on:{\"mousedown\":function($event){return _vm.changeCropSize($event, true, true, 2, 1)},\"touchstart\":function($event){return _vm.changeCropSize($event, true, true, 2, 1)}}}),_vm._v(\" \"),_c('span',{staticClass:\"crop-point point4\",on:{\"mousedown\":function($event){return _vm.changeCropSize($event, true, false, 1, 0)},\"touchstart\":function($event){return _vm.changeCropSize($event, true, false, 1, 0)}}}),_vm._v(\" \"),_c('span',{staticClass:\"crop-point point5\",on:{\"mousedown\":function($event){return _vm.changeCropSize($event, true, false, 2, 0)},\"touchstart\":function($event){return _vm.changeCropSize($event, true, false, 2, 0)}}}),_vm._v(\" \"),_c('span',{staticClass:\"crop-point point6\",on:{\"mousedown\":function($event){return _vm.changeCropSize($event, true, true, 1, 2)},\"touchstart\":function($event){return _vm.changeCropSize($event, true, true, 1, 2)}}}),_vm._v(\" \"),_c('span',{staticClass:\"crop-point point7\",on:{\"mousedown\":function($event){return _vm.changeCropSize($event, false, true, 0, 2)},\"touchstart\":function($event){return _vm.changeCropSize($event, false, true, 0, 2)}}}),_vm._v(\" \"),_c('span',{staticClass:\"crop-point point8\",on:{\"mousedown\":function($event){return _vm.changeCropSize($event, true, true, 2, 2)},\"touchstart\":function($event){return _vm.changeCropSize($event, true, true, 2, 2)}}})]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const Exif = {};\n\nExif.getData = (img) => new Promise((reslove, reject) => {\n  let obj = {};\n  getImageData(img).then(data => {\n    obj.arrayBuffer = data;\n    obj.orientation = getOrientation(data);\n    reslove(obj)\n  }).catch(error => {\n    reject(error)\n  })\n})\n\n// 这里的获取exif要将图片转ArrayBuffer对象，这里假设获取了图片的baes64\n// 步骤一\n// base64转ArrayBuffer对象\nfunction getImageData(img) {\n  let data = null;\n  return new Promise((reslove, reject) => {\n    if (img.src) {\n      if (/^data\\:/i.test(img.src)) { // Data URI\n        data = base64ToArrayBuffer(img.src);\n        reslove(data)\n      } else if (/^blob\\:/i.test(img.src)) { // Object URL\n        var fileReader = new FileReader();\n        fileReader.onload = function (e) {\n          data = e.target.result;\n          reslove(data)\n        };\n        objectURLToBlob(img.src, function (blob) {\n          fileReader.readAsArrayBuffer(blob);\n        });\n      } else {\n        var http = new XMLHttpRequest();\n        http.onload = function () {\n          if (this.status == 200 || this.status === 0) {\n            data = http.response\n            reslove(data)\n          } else {\n            throw \"Could not load image\";\n          }\n          http = null;\n        };\n        http.open(\"GET\", img.src, true);\n        http.responseType = \"arraybuffer\";\n        http.send(null);\n      }\n    } else {\n      reject('img error')\n    }\n  })\n}\n\nfunction objectURLToBlob(url, callback) {\n  var http = new XMLHttpRequest();\n  http.open(\"GET\", url, true);\n  http.responseType = \"blob\";\n  http.onload = function (e) {\n    if (this.status == 200 || this.status === 0) {\n      callback(this.response);\n    }\n  };\n  http.send();\n}\n\n\n\nfunction base64ToArrayBuffer(base64) {\n  base64 = base64.replace(/^data\\:([^\\;]+)\\;base64,/gmi, '');\n  var binary = atob(base64);\n  var len = binary.length;\n  var buffer = new ArrayBuffer(len);\n  var view = new Uint8Array(buffer);\n  for (var i = 0; i < len; i++) {\n    view[i] = binary.charCodeAt(i);\n  }\n  return buffer;\n}\n// 步骤二，Unicode码转字符串\n// ArrayBuffer对象 Unicode码转字符串\nfunction getStringFromCharCode(dataView, start, length) {\n  var str = '';\n  var i;\n  for (i = start, length += start; i < length; i++) {\n    str += String.fromCharCode(dataView.getUint8(i));\n  }\n  return str;\n}\n\n// 步骤三，获取jpg图片的exif的角度（在ios体现最明显）\nfunction getOrientation(arrayBuffer) {\n  var dataView = new DataView(arrayBuffer);\n  var length = dataView.byteLength;\n  var orientation;\n  var exifIDCode;\n  var tiffOffset;\n  var firstIFDOffset;\n  var littleEndian;\n  var endianness;\n  var app1Start;\n  var ifdStart;\n  var offset;\n  var i;\n  // Only handle JPEG image (start by 0xFFD8)\n  if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\n    offset = 2;\n    while (offset < length) {\n      if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\n        app1Start = offset;\n        break;\n      }\n      offset++;\n    }\n  }\n  if (app1Start) {\n    exifIDCode = app1Start + 4;\n    tiffOffset = app1Start + 10;\n    if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n      endianness = dataView.getUint16(tiffOffset);\n      littleEndian = endianness === 0x4949;\n\n      if (littleEndian || endianness === 0x4D4D /* bigEndian */) {\n        if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\n          firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n\n          if (firstIFDOffset >= 0x00000008) {\n            ifdStart = tiffOffset + firstIFDOffset;\n          }\n        }\n      }\n    }\n  }\n  if (ifdStart) {\n    length = dataView.getUint16(ifdStart, littleEndian);\n\n    for (i = 0; i < length; i++) {\n      offset = ifdStart + i * 12 + 2;\n      if (dataView.getUint16(offset, littleEndian) === 0x0112 /* Orientation */) {\n\n        // 8 is the offset of the current tag's value\n        offset += 8;\n\n        // Get the original orientation value\n        orientation = dataView.getUint16(offset, littleEndian);\n\n        // Override the orientation with its default value for Safari (#120)\n        // if (IS_SAFARI_OR_UIWEBVIEW) {\n        //   dataView.setUint16(offset, 1, littleEndian);\n        // }\n        break;\n      }\n    }\n  }\n  return orientation;\n}\n\n\n\nexport default Exif","<template>\n  <div class=\"vue-cropper\" ref=\"cropper\" @mouseover=\"scaleImg\" @mouseout=\"cancelScale\">\n    <div class=\"cropper-box\" v-if=\"imgs\">\n      <div\n        class=\"cropper-box-canvas\"\n        v-show=\"!loading\"\n        :style=\"{\n\t\t\t\t\t'width': trueWidth + 'px',\n\t\t\t\t\t'height': trueHeight + 'px',\n\t\t\t\t\t'transform': 'scale(' + scale + ',' + scale + ') ' + 'translate3d('+ x / scale + 'px,' + y / scale + 'px,' + '0)'\n\t\t\t\t\t+ 'rotateZ('+ rotate * 90 +'deg)'\n\t\t\t\t\t}\"\n      >\n        <img :src=\"imgs\" alt=\"cropper-img\" ref=\"cropperImg\">\n      </div>\n    </div>\n    <div\n      class=\"cropper-drag-box\"\n      :class=\"{'cropper-move': move && !crop, 'cropper-crop': crop, 'cropper-modal': cropping}\"\n      @mousedown=\"startMove\"\n      @touchstart=\"startMove\"\n    ></div>\n    <div\n      v-show=\"cropping\"\n      class=\"cropper-crop-box\"\n      :style=\"{\n\t\t\t\t\t'width': cropW + 'px',\n\t\t\t\t\t'height': cropH + 'px',\n\t\t\t\t\t'transform': 'translate3d('+ cropOffsertX + 'px,' + cropOffsertY + 'px,' + '0)'\n\t\t\t\t}\"\n    >\n      <span class=\"cropper-view-box\">\n        <img\n          :style=\"{\n\t\t\t\t\t\t'width': trueWidth + 'px',\n\t\t\t\t\t\t'height': trueHeight + 'px',\n\t\t\t\t\t\t'transform': 'scale(' + scale + ',' + scale + ') ' + 'translate3d('+ (x - cropOffsertX) / scale  + 'px,' + (y - cropOffsertY) / scale + 'px,' + '0)'\n\t\t\t\t\t\t+ 'rotateZ('+ rotate * 90 +'deg)'\n\t\t\t\t\t\t}\"\n          :src=\"imgs\"\n          alt=\"cropper-img\"\n        >\n      </span>\n      <span class=\"cropper-face cropper-move\" @mousedown=\"cropMove\" @touchstart=\"cropMove\"></span>\n      <span\n        class=\"crop-info\"\n        v-if=\"info\"\n        :style=\"{'top': cropInfo.top}\"\n      >{{ this.cropInfo.width }} × {{ this.cropInfo.height }}</span>\n      <span v-if=\"!fixedBox\">\n        <span\n          class=\"crop-line line-w\"\n          @mousedown=\"changeCropSize($event, false, true, 0, 1)\"\n          @touchstart=\"changeCropSize($event, false, true, 0, 1)\"\n        ></span>\n        <span\n          class=\"crop-line line-a\"\n          @mousedown=\"changeCropSize($event, true, false, 1, 0)\"\n          @touchstart=\"changeCropSize($event, true, false, 1, 0)\"\n        ></span>\n        <span\n          class=\"crop-line line-s\"\n          @mousedown=\"changeCropSize($event, false, true, 0, 2)\"\n          @touchstart=\"changeCropSize($event, false, true, 0, 2)\"\n        ></span>\n        <span\n          class=\"crop-line line-d\"\n          @mousedown=\"changeCropSize($event, true, false, 2, 0)\"\n          @touchstart=\"changeCropSize($event, true, false, 2, 0)\"\n        ></span>\n        <span\n          class=\"crop-point point1\"\n          @mousedown=\"changeCropSize($event, true, true, 1, 1)\"\n          @touchstart=\"changeCropSize($event, true, true, 1, 1)\"\n        ></span>\n        <span\n          class=\"crop-point point2\"\n          @mousedown=\"changeCropSize($event, false, true, 0, 1)\"\n          @touchstart=\"changeCropSize($event, false, true, 0, 1)\"\n        ></span>\n        <span\n          class=\"crop-point point3\"\n          @mousedown=\"changeCropSize($event, true, true, 2, 1)\"\n          @touchstart=\"changeCropSize($event, true, true, 2, 1)\"\n        ></span>\n        <span\n          class=\"crop-point point4\"\n          @mousedown=\"changeCropSize($event, true, false, 1, 0)\"\n          @touchstart=\"changeCropSize($event, true, false, 1, 0)\"\n        ></span>\n        <span\n          class=\"crop-point point5\"\n          @mousedown=\"changeCropSize($event, true, false, 2, 0)\"\n          @touchstart=\"changeCropSize($event, true, false, 2, 0)\"\n        ></span>\n        <span\n          class=\"crop-point point6\"\n          @mousedown=\"changeCropSize($event, true, true, 1, 2)\"\n          @touchstart=\"changeCropSize($event, true, true, 1, 2)\"\n        ></span>\n        <span\n          class=\"crop-point point7\"\n          @mousedown=\"changeCropSize($event, false, true, 0, 2)\"\n          @touchstart=\"changeCropSize($event, false, true, 0, 2)\"\n        ></span>\n        <span\n          class=\"crop-point point8\"\n          @mousedown=\"changeCropSize($event, true, true, 2, 2)\"\n          @touchstart=\"changeCropSize($event, true, true, 2, 2)\"\n        ></span>\n      </span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport exifmin from \"./exif-js-min\";\n\nexport default {\n  data: function() {\n    return {\n      // 容器高宽\n      w: 0,\n      h: 0,\n      // 图片缩放比例\n      scale: 1,\n      // 图片偏移x轴\n      x: 0,\n      // 图片偏移y轴\n      y: 0,\n      // 图片加载\n      loading: true,\n      // 图片真实宽度\n      trueWidth: 0,\n      // 图片真实高度\n      trueHeight: 0,\n      move: true,\n      // 移动的x\n      moveX: 0,\n      // 移动的y\n      moveY: 0,\n      // 开启截图\n      crop: false,\n      // 正在截图\n      cropping: false,\n      // 裁剪框大小\n      cropW: 0,\n      cropH: 0,\n      cropOldW: 0,\n      cropOldH: 0,\n      // 判断是否能够改变\n      canChangeX: false,\n      canChangeY: false,\n      // 改变的基准点\n      changeCropTypeX: 1,\n      changeCropTypeY: 1,\n      // 裁剪框的坐标轴\n      cropX: 0,\n      cropY: 0,\n      cropChangeX: 0,\n      cropChangeY: 0,\n      cropOffsertX: 0,\n      cropOffsertY: 0,\n      // 支持的滚动事件\n      support: \"\",\n      // 移动端手指缩放\n      touches: [],\n      touchNow: false,\n      // 图片旋转\n      rotate: 0,\n      isIos: false,\n      orientation: 0,\n      imgs: \"\",\n      // 图片缩放系数\n      coe: 0.2,\n      // 是否正在多次缩放\n      scaling: false,\n      scalingSet: \"\",\n      coeStatus: \"\",\n      // 控制emit触发频率\n      isCanShow: true\n    };\n  },\n  props: {\n    img: {\n      type: [String, Blob, null, File],\n      default: \"\"\n    },\n    // 输出图片压缩比\n    outputSize: {\n      type: Number,\n      default: 1\n    },\n    outputType: {\n      type: String,\n      default: \"jpeg\"\n    },\n    info: {\n      type: Boolean,\n      default: true\n    },\n    // 是否开启滚轮放大缩小\n    canScale: {\n      type: Boolean,\n      default: true\n    },\n    // 是否自成截图框\n    autoCrop: {\n      type: Boolean,\n      default: false\n    },\n    autoCropWidth: {\n      type: [Number, String],\n      default: 0\n    },\n    autoCropHeight: {\n      type: [Number, String],\n      default: 0\n    },\n    // 是否开启固定宽高比\n    fixed: {\n      type: Boolean,\n      default: false\n    },\n    // 宽高比 w/h\n    fixedNumber: {\n      type: Array,\n      default: () => {\n        return [1, 1];\n      }\n    },\n    // 固定大小 禁止改变截图框大小\n    fixedBox: {\n      type: Boolean,\n      default: false\n    },\n    // 输出截图是否缩放\n    full: {\n      type: Boolean,\n      default: false\n    },\n    // 是否可以拖动图片\n    canMove: {\n      type: Boolean,\n      default: true\n    },\n    // 是否可以拖动截图框\n    canMoveBox: {\n      type: Boolean,\n      default: true\n    },\n    // 上传图片按照原始比例显示\n    original: {\n      type: Boolean,\n      default: false\n    },\n    // 截图框能否超过图片\n    centerBox: {\n      type: Boolean,\n      default: false\n    },\n    // 是否根据dpr输出高清图片\n    high: {\n      type: Boolean,\n      default: true\n    },\n    // 截图框展示宽高类型\n    infoTrue: {\n      type: Boolean,\n      default: false\n    },\n    // 可以压缩图片宽高  默认不超过200\n    maxImgSize: {\n      type: [Number, String],\n      default: 2000\n    },\n    // 倍数  可渲染当前截图框的n倍 0 - 1000;\n    enlarge: {\n      type: [Number, String],\n      default: 1\n    },\n\n    // 自动预览的固定宽度\n    preW: {\n      type: [Number, String],\n      default: 0\n    },\n    /*\n      图片布局方式 mode 实现和css背景一样的效果\n      contain  居中布局 默认不会缩放 保证图片在容器里面 mode: 'contain'\n      cover    拉伸布局 填充整个容器  mode: 'cover'\n      如果仅有一个数值被给定，这个数值将作为宽度值大小，高度值将被设定为auto。 mode: '50px'\n      如果有两个数值被给定，第一个将作为宽度值大小，第二个作为高度值大小。 mode: '50px 60px'\n    */\n    mode: {\n      type: String,\n      default: \"contain\"\n    },\n    //限制最小区域,可传1以上的数字和字符串，限制长宽都是这么大\n    // 也可以传数组[90,90] \n    limitMinSize: {\n      type: [Number, Array, String],\n      default: () => {\n        return 10;\n      }\n    },\n  },\n  computed: {\n    cropInfo() {\n      let obj = {};\n      obj.top = this.cropOffsertY > 21 ? \"-21px\" : \"0px\";\n      obj.width = this.cropW > 0 ? this.cropW : 0;\n      obj.height = this.cropH > 0 ? this.cropH : 0;\n      if (this.infoTrue) {\n        let dpr = 1;\n        if (this.high && !this.full) {\n          dpr = window.devicePixelRatio;\n        }\n        if ((this.enlarge !== 1) & !this.full) {\n          dpr = Math.abs(Number(this.enlarge));\n        }\n        obj.width = obj.width * dpr;\n        obj.height = obj.height * dpr;\n        if (this.full) {\n          obj.width = obj.width / this.scale;\n          obj.height = obj.height / this.scale;\n        }\n      }\n      obj.width = obj.width.toFixed(0);\n      obj.height = obj.height.toFixed(0);\n      return obj;\n    },\n\n    isIE() {\n      var userAgent = navigator.userAgent; //取得浏览器的userAgent字符串\n      const isIE = !!window.ActiveXObject || 'ActiveXObject' in window; //判断是否IE浏览器\n      return isIE;\n    },\n\n    passive () {\n      return this.isIE ? null : {\n        passive: false\n      }\n    }\n  },\n  watch: {\n    // 如果图片改变， 重新布局\n    img() {\n      // 当传入图片时, 读取图片信息同时展示\n      this.checkedImg();\n    },\n    imgs(val) {\n      if (val === \"\") {\n        return;\n      }\n      this.reload();\n    },\n    cropW() {\n      this.showPreview();\n    },\n    cropH() {\n      this.showPreview();\n    },\n    cropOffsertX() {\n      this.showPreview();\n    },\n    cropOffsertY() {\n      this.showPreview();\n    },\n    scale(val, oldVal) {\n      this.showPreview();\n    },\n    x() {\n      this.showPreview();\n    },\n    y() {\n      this.showPreview();\n    },\n    autoCrop(val) {\n      if (val) {\n        this.goAutoCrop();\n      }\n    },\n    // 修改了自动截图框\n    autoCropWidth() {\n      if (this.autoCrop) {\n        this.goAutoCrop();\n      }\n    },\n    autoCropHeight() {\n      if (this.autoCrop) {\n        this.goAutoCrop();\n      }\n    },\n    mode() {\n      this.checkedImg();\n    },\n    rotate() {\n      this.showPreview();\n      if (this.autoCrop) {\n        this.goAutoCrop(this.cropW, this.cropH);\n      } else {\n        if (this.cropW > 0 || this.cropH > 0) {\n          this.goAutoCrop(this.cropW, this.cropH);\n        }\n      }\n    }\n  },\n  methods: {\n    getVersion (name) {\n      var arr = navigator.userAgent.split(' '); \n      var chromeVersion = '';\n      let result = 0;\n      const reg = new RegExp(name, 'i')\n      for(var i=0;i < arr.length;i++){\n          if(reg.test(arr[i]))\n          chromeVersion = arr[i]\n      }\n      if(chromeVersion){\n          result = chromeVersion.split('/')[1].split('.');\n      } else {\n          result = ['0', '0', '0'];\n      }\n      return result\n    },\n    checkOrientationImage(img, orientation, width, height) {\n      // 如果是 chrome内核版本在81 safari 在 605 以上不处理图片旋转\n      // alert(navigator.userAgent)\n      if (this.getVersion('chrome')[0] >= 81) {\n        orientation = -1\n      } else {\n        if (this.getVersion('safari')[0] >= 605 ) {\n          const safariVersion = this.getVersion('version')\n          if (safariVersion[0] > 13 && safariVersion[1] > 1) {\n              orientation = -1\n          }\n        } else {\n          //  判断 ios 版本进行处理\n         // 针对 ios 版本大于 13.4的系统不做图片旋转\n         const isIos  = navigator.userAgent.toLowerCase().match(/cpu iphone os (.*?) like mac os/)\n         if (isIos) {\n           let version = isIos[1]\n           version = version.split('_')\n           if (version[0] > 13 ||  (version[0] >= 13 && version[1] >= 4)) {\n             orientation = -1\n           }\n         }\n        }\n      }\n      \n      // alert(`当前处理的orientation${orientation}`)\n      let canvas = document.createElement(\"canvas\");\n      let ctx = canvas.getContext(\"2d\");\n      ctx.save();\n      \n      switch (orientation) {\n        case 2:\n          canvas.width = width;\n          canvas.height = height;\n          // horizontal flip\n          ctx.translate(width, 0);\n          ctx.scale(-1, 1);\n          break;\n        case 3:\n          canvas.width = width;\n          canvas.height = height;\n          //180 graus\n          ctx.translate(width / 2, height / 2);\n          ctx.rotate((180 * Math.PI) / 180);\n          ctx.translate(-width / 2, -height / 2);\n          break;\n        case 4:\n          canvas.width = width;\n          canvas.height = height;\n          // vertical flip\n          ctx.translate(0, height);\n          ctx.scale(1, -1);\n          break;\n        case 5:\n          // vertical flip + 90 rotate right\n          canvas.height = width;\n          canvas.width = height;\n          ctx.rotate(0.5 * Math.PI);\n          ctx.scale(1, -1);\n          break;\n        case 6:\n          canvas.width = height;\n          canvas.height = width;\n          //90 graus\n          ctx.translate(height / 2, width / 2);\n          ctx.rotate((90 * Math.PI) / 180);\n          ctx.translate(-width / 2, -height / 2);\n          break;\n        case 7:\n          // horizontal flip + 90 rotate right\n          canvas.height = width;\n          canvas.width = height;\n          ctx.rotate(0.5 * Math.PI);\n          ctx.translate(width, -height);\n          ctx.scale(-1, 1);\n          break;\n        case 8:\n          canvas.height = width;\n          canvas.width = height;\n          //-90 graus\n          ctx.translate(height / 2, width / 2);\n          ctx.rotate((-90 * Math.PI) / 180);\n          ctx.translate(-width / 2, -height / 2);\n          break;\n        default:\n          canvas.width = width;\n          canvas.height = height;\n      }\n\n      ctx.drawImage(img, 0, 0, width, height);\n      ctx.restore();\n      canvas.toBlob(\n        blob => {\n          let data = URL.createObjectURL(blob);\n          URL.revokeObjectURL(this.imgs)\n          this.imgs = data;\n        },\n        \"image/\" + this.outputType,\n        1\n      );\n    },\n\n    // checkout img\n    checkedImg() {\n      if (this.img === null || this.img === '') {\n        this.imgs = ''\n        this.clearCrop()\n        return\n      }\n      this.loading = true;\n      this.scale = 1;\n      this.rotate = 0;\n      this.clearCrop();\n      let img = new Image();\n      img.onload = () => {\n        if (this.img === \"\") {\n          this.$emit(\"imgLoad\", \"error\");\n          this.$emit(\"img-load\", \"error\");\n          return false;\n        }\n\n        let width = img.width;\n        let height = img.height;\n        exifmin.getData(img).then(data => {\n          this.orientation = data.orientation || 1;\n          let max = Number(this.maxImgSize);\n          if (!this.orientation && (width < max) & (height < max)) {\n            this.imgs = this.img;\n            return;\n          }\n\n          if (width > max) {\n            height = (height / width) * max;\n            width = max;\n          }\n\n          if (height > max) {\n            width = (width / height) * max;\n            height = max;\n          }\n          this.checkOrientationImage(img, this.orientation, width, height);\n        });\n      };\n\n      img.onerror = () => {\n        this.$emit(\"imgLoad\", \"error\");\n        this.$emit(\"img-load\", \"error\");\n      };\n\n      // 判断如果不是base64图片 再添加crossOrigin属性，否则会导致iOS低版本(10.2)无法显示图片\n      if (this.img.substr(0, 4) !== \"data\") {\n        img.crossOrigin = \"\";\n      }\n\n      if (this.isIE) {\n        var xhr = new XMLHttpRequest();\n        xhr.onload = function() {\n          var url = URL.createObjectURL(this.response);\n          img.src = url;\n        };\n        xhr.open(\"GET\", this.img, true);\n        xhr.responseType = \"blob\";\n        xhr.send();\n      } else {\n        img.src = this.img;\n      }\n    },\n    // 当按下鼠标键\n    startMove(e) {\n      e.preventDefault();\n      // 如果move 为true 表示当前可以拖动\n      if (this.move && !this.crop) {\n        if (!this.canMove) {\n          return false;\n        }\n        // 开始移动\n        this.moveX = ('clientX' in e ? e.clientX : e.touches[0].clientX) - this.x;\n        this.moveY = ('clientY' in e ? e.clientY : e.touches[0].clientY) - this.y;\n        if (e.touches) {\n          window.addEventListener(\"touchmove\", this.moveImg);\n          window.addEventListener(\"touchend\", this.leaveImg);\n          if (e.touches.length == 2) {\n            // 记录手指刚刚放上去\n            this.touches = e.touches;\n            window.addEventListener(\"touchmove\", this.touchScale);\n            window.addEventListener(\"touchend\", this.cancelTouchScale);\n          }\n        } else {\n          window.addEventListener(\"mousemove\", this.moveImg);\n          window.addEventListener(\"mouseup\", this.leaveImg);\n        }\n        // 触发图片移动事件\n        this.$emit(\"imgMoving\", {\n          moving: true,\n          axis: this.getImgAxis()\n        });\n        this.$emit(\"img-moving\", {\n          moving: true,\n          axis: this.getImgAxis()\n        });\n      } else {\n        // 截图ing\n        this.cropping = true;\n        // 绑定截图事件\n        window.addEventListener(\"mousemove\", this.createCrop);\n        window.addEventListener(\"mouseup\", this.endCrop);\n        window.addEventListener(\"touchmove\", this.createCrop);\n        window.addEventListener(\"touchend\", this.endCrop);\n        this.cropOffsertX = e.offsetX\n          ? e.offsetX\n          : e.touches[0].pageX - this.$refs.cropper.offsetLeft;\n        this.cropOffsertY = e.offsetY\n          ? e.offsetY\n          : e.touches[0].pageY - this.$refs.cropper.offsetTop;\n        this.cropX = 'clientX' in e ? e.clientX : e.touches[0].clientX;\n        this.cropY = 'clientY' in e ? e.clientY : e.touches[0].clientY;\n        this.cropChangeX = this.cropOffsertX;\n        this.cropChangeY = this.cropOffsertY;\n        this.cropW = 0;\n        this.cropH = 0;\n      }\n    },\n\n    // 移动端缩放\n    touchScale(e) {\n      e.preventDefault();\n      let scale = this.scale;\n      // 记录变化量\n      // 第一根手指\n      var oldTouch1 = {\n        x: this.touches[0].clientX,\n        y: this.touches[0].clientY\n      };\n      var newTouch1 = {\n        x: e.touches[0].clientX,\n        y: e.touches[0].clientY\n      };\n      // 第二根手指\n      var oldTouch2 = {\n        x: this.touches[1].clientX,\n        y: this.touches[1].clientY\n      };\n      var newTouch2 = {\n        x: e.touches[1].clientX,\n        y: e.touches[1].clientY\n      };\n      var oldL = Math.sqrt(\n        Math.pow(oldTouch1.x - oldTouch2.x, 2) +\n          Math.pow(oldTouch1.y - oldTouch2.y, 2)\n      );\n      var newL = Math.sqrt(\n        Math.pow(newTouch1.x - newTouch2.x, 2) +\n          Math.pow(newTouch1.y - newTouch2.y, 2)\n      );\n      var cha = newL - oldL;\n      // 根据图片本身大小 决定每次改变大小的系数, 图片越大系数越小\n      // 1px - 0.2\n      var coe = 1;\n      coe =\n        coe / this.trueWidth > coe / this.trueHeight\n          ? coe / this.trueHeight\n          : coe / this.trueWidth;\n      coe = coe > 0.1 ? 0.1 : coe;\n      var num = coe * cha;\n      if (!this.touchNow) {\n        this.touchNow = true;\n        if (cha > 0) {\n          scale += Math.abs(num);\n        } else if (cha < 0) {\n          scale > Math.abs(num) ? (scale -= Math.abs(num)) : scale;\n        }\n        this.touches = e.touches;\n        setTimeout(() => {\n          this.touchNow = false;\n        }, 8);\n        if (!this.checkoutImgAxis(this.x, this.y, scale)) {\n          return false;\n        }\n        this.scale = scale;\n      }\n    },\n\n    cancelTouchScale(e) {\n      window.removeEventListener(\"touchmove\", this.touchScale);\n    },\n\n    // 移动图片\n    moveImg(e) {\n      e.preventDefault();\n      if (e.touches && e.touches.length === 2) {\n        this.touches = e.touches;\n        window.addEventListener(\"touchmove\", this.touchScale);\n        window.addEventListener(\"touchend\", this.cancelTouchScale);\n        window.removeEventListener(\"touchmove\", this.moveImg);\n        return false;\n      }\n      let nowX = 'clientX' in e ? e.clientX : e.touches[0].clientX;\n      let nowY = 'clientY' in e ? e.clientY : e.touches[0].clientY;\n\n      let changeX, changeY;\n      changeX = nowX - this.moveX;\n      changeY = nowY - this.moveY;\n\n      this.$nextTick(() => {\n        if (this.centerBox) {\n          let axis = this.getImgAxis(changeX, changeY, this.scale);\n          let cropAxis = this.getCropAxis();\n          let imgW = this.trueHeight * this.scale;\n          let imgH = this.trueWidth * this.scale;\n          let maxLeft, maxTop, maxRight, maxBottom;\n          switch (this.rotate) {\n            case 1:\n            case -1:\n            case 3:\n            case -3:\n              maxLeft =\n                this.cropOffsertX -\n                (this.trueWidth * (1 - this.scale)) / 2 +\n                (imgW - imgH) / 2;\n              maxTop =\n                this.cropOffsertY -\n                (this.trueHeight * (1 - this.scale)) / 2 +\n                (imgH - imgW) / 2;\n              maxRight = maxLeft - imgW + this.cropW;\n              maxBottom = maxTop - imgH + this.cropH;\n              break;\n            default:\n              maxLeft =\n                this.cropOffsertX - (this.trueWidth * (1 - this.scale)) / 2;\n              maxTop =\n                this.cropOffsertY - (this.trueHeight * (1 - this.scale)) / 2;\n              maxRight = maxLeft - imgH + this.cropW;\n              maxBottom = maxTop - imgW + this.cropH;\n              break;\n          }\n\n          // 图片左边 图片不能超过截图框\n          if (axis.x1 >= cropAxis.x1) {\n            changeX = maxLeft;\n          }\n\n          // 图片上边 图片不能超过截图框\n          if (axis.y1 >= cropAxis.y1) {\n            changeY = maxTop;\n          }\n\n          // 图片右边\n          if (axis.x2 <= cropAxis.x2) {\n            changeX = maxRight;\n          }\n\n          // 图片下边\n          if (axis.y2 <= cropAxis.y2) {\n            changeY = maxBottom;\n          }\n        }\n        this.x = changeX;\n        this.y = changeY;\n        // 触发图片移动事件\n        this.$emit(\"imgMoving\", {\n          moving: true,\n          axis: this.getImgAxis()\n        });\n        this.$emit(\"img-moving\", {\n          moving: true,\n          axis: this.getImgAxis()\n        });\n      });\n    },\n    // 移动图片结束\n    leaveImg(e) {\n      window.removeEventListener(\"mousemove\", this.moveImg);\n      window.removeEventListener(\"touchmove\", this.moveImg);\n      window.removeEventListener(\"mouseup\", this.leaveImg);\n      window.removeEventListener(\"touchend\", this.leaveImg);\n      // 触发图片移动事件\n      this.$emit(\"imgMoving\", {\n        moving: false,\n        axis: this.getImgAxis()\n      });\n      this.$emit(\"img-moving\", {\n        moving: false,\n        axis: this.getImgAxis()\n      });\n    },\n    // 缩放图片\n    scaleImg() {\n      if (this.canScale) {\n        window.addEventListener(this.support, this.changeSize, this.passive);\n      }\n    },\n    // 移出框\n    cancelScale() {\n      if (this.canScale) {\n        window.removeEventListener(this.support, this.changeSize);\n      }\n    },\n    // 改变大小函数\n    changeSize(e) {\n      e.preventDefault();\n      let scale = this.scale;\n      var change = e.deltaY || e.wheelDelta;\n      // 根据图片本身大小 决定每次改变大小的系数, 图片越大系数越小\n      var isFirefox = navigator.userAgent.indexOf(\"Firefox\");\n      change = isFirefox > 0 ? change * 30 : change;\n      // 修复ie的滚动缩放\n      if (this.isIE) {\n        change = -change;\n      }\n      // 1px - 0.2\n      var coe = this.coe;\n      coe =\n        coe / this.trueWidth > coe / this.trueHeight\n          ? coe / this.trueHeight\n          : coe / this.trueWidth;\n      var num = coe * change;\n      num < 0\n        ? (scale += Math.abs(num))\n        : scale > Math.abs(num)\n        ? (scale -= Math.abs(num))\n        : scale;\n      // 延迟0.1s 每次放大大或者缩小的范围\n      let status = num < 0 ? \"add\" : \"reduce\";\n      if (status !== this.coeStatus) {\n        this.coeStatus = status;\n        this.coe = 0.2;\n      }\n      if (!this.scaling) {\n        this.scalingSet = setTimeout(() => {\n          this.scaling = false;\n          this.coe = this.coe += 0.01;\n        }, 50);\n      }\n      this.scaling = true;\n      if (!this.checkoutImgAxis(this.x, this.y, scale)) {\n        return false;\n      }\n      this.scale = scale;\n    },\n\n    // 修改图片大小函数\n    changeScale(num) {\n      let scale = this.scale;\n      num = num || 1;\n      var coe = 20;\n      coe =\n        coe / this.trueWidth > coe / this.trueHeight\n          ? coe / this.trueHeight\n          : coe / this.trueWidth;\n      num = num * coe;\n      num > 0\n        ? (scale += Math.abs(num))\n        : scale > Math.abs(num)\n        ? (scale -= Math.abs(num))\n        : scale;\n      if (!this.checkoutImgAxis(this.x, this.y, scale)) {\n        return false;\n      }\n      this.scale = scale;\n    },\n    // 创建截图框\n    createCrop(e) {\n      e.preventDefault();\n      // 移动生成大小\n      var nowX = 'clientX' in e ? e.clientX : e.touches ? e.touches[0].clientX : 0;\n      var nowY = 'clientY' in e ? e.clientY : e.touches ? e.touches[0].clientY : 0;\n      this.$nextTick(() => {\n        var fw = nowX - this.cropX;\n        var fh = nowY - this.cropY;\n        if (fw > 0) {\n          this.cropW =\n            fw + this.cropChangeX > this.w ? this.w - this.cropChangeX : fw;\n          this.cropOffsertX = this.cropChangeX;\n        } else {\n          this.cropW =\n            this.w - this.cropChangeX + Math.abs(fw) > this.w\n              ? this.cropChangeX\n              : Math.abs(fw);\n          this.cropOffsertX =\n            this.cropChangeX + fw > 0 ? this.cropChangeX + fw : 0;\n        }\n\n        if (!this.fixed) {\n          if (fh > 0) {\n            this.cropH =\n              fh + this.cropChangeY > this.h ? this.h - this.cropChangeY : fh;\n            this.cropOffsertY = this.cropChangeY;\n          } else {\n            this.cropH =\n              this.h - this.cropChangeY + Math.abs(fh) > this.h\n                ? this.cropChangeY\n                : Math.abs(fh);\n            this.cropOffsertY =\n              this.cropChangeY + fh > 0 ? this.cropChangeY + fh : 0;\n          }\n        } else {\n          var fixedHeight =\n            (this.cropW / this.fixedNumber[0]) * this.fixedNumber[1];\n          if (fixedHeight + this.cropOffsertY > this.h) {\n            this.cropH = this.h - this.cropOffsertY;\n            this.cropW =\n              (this.cropH / this.fixedNumber[1]) * this.fixedNumber[0];\n            if (fw > 0) {\n              this.cropOffsertX = this.cropChangeX;\n            } else {\n              this.cropOffsertX = this.cropChangeX - this.cropW;\n            }\n          } else {\n            this.cropH = fixedHeight;\n          }\n          this.cropOffsertY = this.cropOffsertY;\n        }\n      });\n    },\n\n    // 改变截图框大小\n    changeCropSize(e, w, h, typeW, typeH) {\n      e.preventDefault();\n      window.addEventListener(\"mousemove\", this.changeCropNow);\n      window.addEventListener(\"mouseup\", this.changeCropEnd);\n      window.addEventListener(\"touchmove\", this.changeCropNow);\n      window.addEventListener(\"touchend\", this.changeCropEnd);\n      this.canChangeX = w;\n      this.canChangeY = h;\n      this.changeCropTypeX = typeW;\n      this.changeCropTypeY = typeH;\n      this.cropX = 'clientX' in e ? e.clientX : e.touches[0].clientX;\n      this.cropY = 'clientY' in e ? e.clientY : e.touches[0].clientY;\n      this.cropOldW = this.cropW;\n      this.cropOldH = this.cropH;\n      this.cropChangeX = this.cropOffsertX;\n      this.cropChangeY = this.cropOffsertY;\n      if (this.fixed) {\n        if (this.canChangeX && this.canChangeY) {\n          this.canChangeY = 0;\n        }\n      }\n      this.$emit('change-crop-size', {\n        width: this.cropW,\n        height: this.cropH\n      })\n    },\n\n    // 正在改变\n    changeCropNow(e) {\n      e.preventDefault();\n      var nowX = 'clientX' in e ? e.clientX : e.touches ? e.touches[0].clientX : 0;\n      var nowY = 'clientY' in e ? e.clientY : e.touches ? e.touches[0].clientY : 0;\n      // 容器的宽高\n      let wrapperW = this.w;\n      let wrapperH = this.h;\n\n      // 不能超过的坐标轴\n      let minX = 0;\n      let minY = 0;\n\n      if (this.centerBox) {\n        let axis = this.getImgAxis();\n        let imgW = axis.x2;\n        let imgH = axis.y2;\n        minX = axis.x1 > 0 ? axis.x1 : 0;\n        minY = axis.y1 > 0 ? axis.y1 : 0;\n        if (wrapperW > imgW) {\n          wrapperW = imgW;\n        }\n\n        if (wrapperH > imgH) {\n          wrapperH = imgH;\n        }\n      }\n\n      this.$nextTick(() => {\n        var fw = nowX - this.cropX;\n        var fh = nowY - this.cropY;\n        if (this.canChangeX) {\n          if (this.changeCropTypeX === 1) {\n            if (this.cropOldW - fw > 0) {\n              this.cropW =\n                wrapperW - this.cropChangeX - fw <= wrapperW - minX\n                  ? this.cropOldW - fw\n                  : this.cropOldW + this.cropChangeX - minX;\n              this.cropOffsertX =\n                wrapperW - this.cropChangeX - fw <= wrapperW - minX\n                  ? this.cropChangeX + fw\n                  : minX;\n            } else {\n              this.cropW =\n                Math.abs(fw) + this.cropChangeX <= wrapperW\n                  ? Math.abs(fw) - this.cropOldW\n                  : wrapperW - this.cropOldW - this.cropChangeX;\n              this.cropOffsertX = this.cropChangeX + this.cropOldW;\n            }\n          } else if (this.changeCropTypeX === 2) {\n            if (this.cropOldW + fw > 0) {\n              this.cropW =\n                this.cropOldW + fw + this.cropOffsertX <= wrapperW\n                  ? this.cropOldW + fw\n                  : wrapperW - this.cropOffsertX;\n              this.cropOffsertX = this.cropChangeX;\n            } else {\n              // 右侧坐标抽 超过左侧\n              this.cropW =\n                wrapperW - this.cropChangeX + Math.abs(fw + this.cropOldW) <=\n                wrapperW - minX\n                  ? Math.abs(fw + this.cropOldW)\n                  : this.cropChangeX - minX;\n              this.cropOffsertX =\n                wrapperW - this.cropChangeX + Math.abs(fw + this.cropOldW) <=\n                wrapperW - minX\n                  ? this.cropChangeX - Math.abs(fw + this.cropOldW)\n                  : minX;\n            }\n          }\n        }\n\n        if (this.canChangeY) {\n          if (this.changeCropTypeY === 1) {\n            if (this.cropOldH - fh > 0) {\n              this.cropH =\n                wrapperH - this.cropChangeY - fh <= wrapperH - minY\n                  ? this.cropOldH - fh\n                  : this.cropOldH + this.cropChangeY - minY;\n              this.cropOffsertY =\n                wrapperH - this.cropChangeY - fh <= wrapperH - minY\n                  ? this.cropChangeY + fh\n                  : minY;\n            } else {\n              this.cropH =\n                Math.abs(fh) + this.cropChangeY <= wrapperH\n                  ? Math.abs(fh) - this.cropOldH\n                  : wrapperH - this.cropOldH - this.cropChangeY;\n              this.cropOffsertY = this.cropChangeY + this.cropOldH;\n            }\n          } else if (this.changeCropTypeY === 2) {\n            if (this.cropOldH + fh > 0) {\n              this.cropH =\n                this.cropOldH + fh + this.cropOffsertY <= wrapperH\n                  ? this.cropOldH + fh\n                  : wrapperH - this.cropOffsertY;\n              this.cropOffsertY = this.cropChangeY;\n            } else {\n              this.cropH =\n                wrapperH - this.cropChangeY + Math.abs(fh + this.cropOldH) <=\n                wrapperH - minY\n                  ? Math.abs(fh + this.cropOldH)\n                  : this.cropChangeY - minY;\n              this.cropOffsertY =\n                wrapperH - this.cropChangeY + Math.abs(fh + this.cropOldH) <=\n                wrapperH - minY\n                  ? this.cropChangeY - Math.abs(fh + this.cropOldH)\n                  : minY;\n            }\n          }\n        }\n\n        if (this.canChangeX && this.fixed) {\n          var fixedHeight =\n            (this.cropW / this.fixedNumber[0]) * this.fixedNumber[1];\n          if (fixedHeight + this.cropOffsertY > wrapperH) {\n            this.cropH = wrapperH - this.cropOffsertY;\n            this.cropW =\n              (this.cropH / this.fixedNumber[1]) * this.fixedNumber[0];\n          } else {\n            this.cropH = fixedHeight;\n          }\n        }\n\n        if (this.canChangeY && this.fixed) {\n          var fixedWidth =\n            (this.cropH / this.fixedNumber[1]) * this.fixedNumber[0];\n          if (fixedWidth + this.cropOffsertX > wrapperW) {\n            this.cropW = wrapperW - this.cropOffsertX;\n            this.cropH =\n              (this.cropW / this.fixedNumber[0]) * this.fixedNumber[1];\n          } else {\n            this.cropW = fixedWidth;\n          }\n        }\n      });\n    },\n\n    checkCropLimitSize () {\n      let { cropW, cropH, limitMinSize } = this;\n\n      let limitMinNum = new Array;\n      if (!Array.isArray[limitMinSize]) {\n        limitMinNum = [limitMinSize, limitMinSize]\n      } else {\n        limitMinNum = limitMinSize\n      }\n      \n      //限制最小宽度和高度\n      cropW = parseFloat(limitMinNum[0])\n      cropH = parseFloat(limitMinNum[1])\n      return [cropW, cropH]\n    },\n    // 结束改变\n    changeCropEnd(e) {\n      window.removeEventListener(\"mousemove\", this.changeCropNow);\n      window.removeEventListener(\"mouseup\", this.changeCropEnd);\n      window.removeEventListener(\"touchmove\", this.changeCropNow);\n      window.removeEventListener(\"touchend\", this.changeCropEnd);\n    },\n\n    // 创建完成\n    endCrop() {\n      if (this.cropW === 0 && this.cropH === 0) {\n        this.cropping = false;\n      }\n      window.removeEventListener(\"mousemove\", this.createCrop);\n      window.removeEventListener(\"mouseup\", this.endCrop);\n      window.removeEventListener(\"touchmove\", this.createCrop);\n      window.removeEventListener(\"touchend\", this.endCrop);\n    },\n    // 开始截图\n    startCrop() {\n      this.crop = true;\n    },\n    // 停止截图\n    stopCrop() {\n      this.crop = false;\n    },\n    // 清除截图\n    clearCrop() {\n      this.cropping = false;\n      this.cropW = 0;\n      this.cropH = 0;\n    },\n    // 截图移动\n    cropMove(e) {\n      e.preventDefault();\n      if (!this.canMoveBox) {\n        this.crop = false;\n        this.startMove(e);\n        return false;\n      }\n\n      if (e.touches && e.touches.length === 2) {\n        this.crop = false;\n        this.startMove(e);\n        this.leaveCrop();\n        return false;\n      }\n      window.addEventListener(\"mousemove\", this.moveCrop);\n      window.addEventListener(\"mouseup\", this.leaveCrop);\n      window.addEventListener(\"touchmove\", this.moveCrop);\n      window.addEventListener(\"touchend\", this.leaveCrop);\n      let x = 'clientX' in e ? e.clientX : e.touches[0].clientX;\n      let y = 'clientY' in e ? e.clientY : e.touches[0].clientY;\n      let newX, newY;\n      newX = x - this.cropOffsertX;\n      newY = y - this.cropOffsertY;\n      this.cropX = newX;\n      this.cropY = newY;\n      // 触发截图框移动事件\n      this.$emit(\"cropMoving\", {\n        moving: true,\n        axis: this.getCropAxis()\n      });\n      this.$emit(\"crop-moving\", {\n        moving: true,\n        axis: this.getCropAxis()\n      });\n    },\n\n    moveCrop(e, isMove) {\n      let nowX = 0;\n      let nowY = 0;\n      if (e) {\n        e.preventDefault();\n        nowX = 'clientX' in e ? e.clientX : e.touches[0].clientX;\n        nowY = 'clientY' in e ? e.clientY : e.touches[0].clientY;\n      }\n      this.$nextTick(() => {\n        let cx, cy;\n        let fw = nowX - this.cropX;\n        let fh = nowY - this.cropY;\n        if (isMove) {\n          fw = this.cropOffsertX;\n          fh = this.cropOffsertY;\n        }\n        // 不能超过外层容器\n        if (fw <= 0) {\n          cx = 0;\n        } else if (fw + this.cropW > this.w) {\n          cx = this.w - this.cropW;\n        } else {\n          cx = fw;\n        }\n\n        if (fh <= 0) {\n          cy = 0;\n        } else if (fh + this.cropH > this.h) {\n          cy = this.h - this.cropH;\n        } else {\n          cy = fh;\n        }\n\n        // 不能超过图片\n        if (this.centerBox) {\n          let axis = this.getImgAxis();\n          // 横坐标判断\n          if (cx <= axis.x1) {\n            cx = axis.x1;\n          }\n\n          if (cx + this.cropW > axis.x2) {\n            cx = axis.x2 - this.cropW;\n          }\n\n          // 纵坐标纵轴\n          if (cy <= axis.y1) {\n            cy = axis.y1;\n          }\n\n          if (cy + this.cropH > axis.y2) {\n            cy = axis.y2 - this.cropH;\n          }\n        }\n\n        this.cropOffsertX = cx;\n        this.cropOffsertY = cy;\n\n        // 触发截图框移动事件\n        this.$emit(\"cropMoving\", {\n          moving: true,\n          axis: this.getCropAxis()\n        });\n        this.$emit(\"crop-moving\", {\n          moving: true,\n          axis: this.getCropAxis()\n        });\n      });\n    },\n\n    // 算出不同场景下面 图片相对于外层容器的坐标轴\n    getImgAxis(x, y, scale) {\n      x = x || this.x;\n      y = y || this.y;\n      scale = scale || this.scale;\n      // 如果设置了截图框在图片内， 那么限制截图框不能超过图片的坐标\n      // 图片的坐标\n      let obj = {\n        x1: 0,\n        x2: 0,\n        y1: 0,\n        y2: 0\n      };\n      let imgW = this.trueWidth * scale;\n      let imgH = this.trueHeight * scale;\n      switch (this.rotate) {\n        case 0:\n          obj.x1 = x + (this.trueWidth * (1 - scale)) / 2;\n          obj.x2 = obj.x1 + this.trueWidth * scale;\n          obj.y1 = y + (this.trueHeight * (1 - scale)) / 2;\n          obj.y2 = obj.y1 + this.trueHeight * scale;\n          break;\n        case 1:\n        case -1:\n        case 3:\n        case -3:\n          obj.x1 = x + (this.trueWidth * (1 - scale)) / 2 + (imgW - imgH) / 2;\n          obj.x2 = obj.x1 + this.trueHeight * scale;\n          obj.y1 = y + (this.trueHeight * (1 - scale)) / 2 + (imgH - imgW) / 2;\n          obj.y2 = obj.y1 + this.trueWidth * scale;\n          break;\n        default:\n          obj.x1 = x + (this.trueWidth * (1 - scale)) / 2;\n          obj.x2 = obj.x1 + this.trueWidth * scale;\n          obj.y1 = y + (this.trueHeight * (1 - scale)) / 2;\n          obj.y2 = obj.y1 + this.trueHeight * scale;\n          break;\n      }\n      return obj;\n    },\n\n    // 获取截图框的坐标轴\n    getCropAxis() {\n      let obj = {\n        x1: 0,\n        x2: 0,\n        y1: 0,\n        y2: 0\n      };\n      obj.x1 = this.cropOffsertX;\n      obj.x2 = obj.x1 + this.cropW;\n      obj.y1 = this.cropOffsertY;\n      obj.y2 = obj.y1 + this.cropH;\n      return obj;\n    },\n\n    leaveCrop(e) {\n      window.removeEventListener(\"mousemove\", this.moveCrop);\n      window.removeEventListener(\"mouseup\", this.leaveCrop);\n      window.removeEventListener(\"touchmove\", this.moveCrop);\n      window.removeEventListener(\"touchend\", this.leaveCrop);\n      // 触发截图框移动事件\n      this.$emit(\"cropMoving\", {\n        moving: false,\n        axis: this.getCropAxis()\n      });\n      this.$emit(\"crop-moving\", {\n        moving: false,\n        axis: this.getCropAxis()\n      });\n    },\n\n    getCropChecked(cb) {\n      let canvas = document.createElement(\"canvas\");\n      let img = new Image();\n      let rotate = this.rotate;\n      let trueWidth = this.trueWidth;\n      let trueHeight = this.trueHeight;\n      let cropOffsertX = this.cropOffsertX;\n      let cropOffsertY = this.cropOffsertY;\n      img.onload = () => {\n        if (this.cropW !== 0) {\n          let ctx = canvas.getContext(\"2d\");\n          let dpr = 1;\n          if (this.high & !this.full) {\n            dpr = window.devicePixelRatio;\n          }\n          if ((this.enlarge !== 1) & !this.full) {\n            dpr = Math.abs(Number(this.enlarge));\n          }\n          let width = this.cropW * dpr;\n          let height = this.cropH * dpr;\n          let imgW = trueWidth * this.scale * dpr;\n          let imgH = trueHeight * this.scale * dpr;\n          // 图片x轴偏移\n          let dx =\n            (this.x - cropOffsertX + (this.trueWidth * (1 - this.scale)) / 2) *\n            dpr;\n          // 图片y轴偏移\n          let dy =\n            (this.y - cropOffsertY + (this.trueHeight * (1 - this.scale)) / 2) *\n            dpr;\n          //保存状态\n          setCanvasSize(width, height);\n          ctx.save();\n          switch (rotate) {\n            case 0:\n              if (!this.full) {\n                ctx.drawImage(img, dx, dy, imgW, imgH);\n              } else {\n                // 输出原图比例截图\n                setCanvasSize(width / this.scale, height / this.scale);\n                ctx.drawImage(\n                  img,\n                  dx / this.scale,\n                  dy / this.scale,\n                  imgW / this.scale,\n                  imgH / this.scale\n                );\n              }\n              break;\n            case 1:\n            case -3:\n              if (!this.full) {\n                // 换算图片旋转后的坐标弥补\n                dx = dx + (imgW - imgH) / 2;\n                dy = dy + (imgH - imgW) / 2;\n                ctx.rotate((rotate * 90 * Math.PI) / 180);\n                ctx.drawImage(img, dy, -dx - imgH, imgW, imgH);\n              } else {\n                setCanvasSize(width / this.scale, height / this.scale);\n                // 换算图片旋转后的坐标弥补\n                dx =\n                  dx / this.scale + (imgW / this.scale - imgH / this.scale) / 2;\n                dy =\n                  dy / this.scale + (imgH / this.scale - imgW / this.scale) / 2;\n                ctx.rotate((rotate * 90 * Math.PI) / 180);\n                ctx.drawImage(\n                  img,\n                  dy,\n                  -dx - imgH / this.scale,\n                  imgW / this.scale,\n                  imgH / this.scale\n                );\n              }\n              break;\n            case 2:\n            case -2:\n              if (!this.full) {\n                ctx.rotate((rotate * 90 * Math.PI) / 180);\n                ctx.drawImage(img, -dx - imgW, -dy - imgH, imgW, imgH);\n              } else {\n                setCanvasSize(width / this.scale, height / this.scale);\n                ctx.rotate((rotate * 90 * Math.PI) / 180);\n                dx = dx / this.scale;\n                dy = dy / this.scale;\n                ctx.drawImage(\n                  img,\n                  -dx - imgW / this.scale,\n                  -dy - imgH / this.scale,\n                  imgW / this.scale,\n                  imgH / this.scale\n                );\n              }\n              break;\n            case 3:\n            case -1:\n              if (!this.full) {\n                // 换算图片旋转后的坐标弥补\n                dx = dx + (imgW - imgH) / 2;\n                dy = dy + (imgH - imgW) / 2;\n                ctx.rotate((rotate * 90 * Math.PI) / 180);\n                ctx.drawImage(img, -dy - imgW, dx, imgW, imgH);\n              } else {\n                setCanvasSize(width / this.scale, height / this.scale);\n                // 换算图片旋转后的坐标弥补\n                dx =\n                  dx / this.scale + (imgW / this.scale - imgH / this.scale) / 2;\n                dy =\n                  dy / this.scale + (imgH / this.scale - imgW / this.scale) / 2;\n                ctx.rotate((rotate * 90 * Math.PI) / 180);\n                ctx.drawImage(\n                  img,\n                  -dy - imgW / this.scale,\n                  dx,\n                  imgW / this.scale,\n                  imgH / this.scale\n                );\n              }\n              break;\n            default:\n              if (!this.full) {\n                ctx.drawImage(img, dx, dy, imgW, imgH);\n              } else {\n                // 输出原图比例截图\n                setCanvasSize(width / this.scale, height / this.scale);\n                ctx.drawImage(\n                  img,\n                  dx / this.scale,\n                  dy / this.scale,\n                  imgW / this.scale,\n                  imgH / this.scale\n                );\n              }\n          }\n          ctx.restore();\n        } else {\n          let width = trueWidth * this.scale;\n          let height = trueHeight * this.scale;\n          let ctx = canvas.getContext(\"2d\");\n          ctx.save();\n          switch (rotate) {\n            case 0:\n              setCanvasSize(width, height);\n              ctx.drawImage(img, 0, 0, width, height);\n              break;\n            case 1:\n            case -3:\n              // 旋转90度 或者-270度 宽度和高度对调\n              setCanvasSize(height, width);\n              ctx.rotate((rotate * 90 * Math.PI) / 180);\n              ctx.drawImage(img, 0, -height, width, height);\n              break;\n            case 2:\n            case -2:\n              setCanvasSize(width, height);\n              ctx.rotate((rotate * 90 * Math.PI) / 180);\n              ctx.drawImage(img, -width, -height, width, height);\n              break;\n            case 3:\n            case -1:\n              setCanvasSize(height, width);\n              ctx.rotate((rotate * 90 * Math.PI) / 180);\n              ctx.drawImage(img, -width, 0, width, height);\n              break;\n            default:\n              setCanvasSize(width, height);\n              ctx.drawImage(img, 0, 0, width, height);\n          }\n          ctx.restore();\n        }\n        cb(canvas);\n      };\n      // 判断图片是否是base64\n      var s = this.img.substr(0, 4);\n      if (s !== \"data\") {\n        img.crossOrigin = \"Anonymous\";\n      }\n      img.src = this.imgs;\n\n      function setCanvasSize(width, height) {\n        canvas.width = Math.round(width);\n        canvas.height = Math.round(height);\n      }\n    },\n\n    // 获取转换成base64 的图片信息\n    getCropData(cb) {\n      this.getCropChecked(data => {\n        cb(data.toDataURL(\"image/\" + this.outputType, this.outputSize));\n      });\n    },\n\n    //canvas获取为blob对象\n    getCropBlob(cb) {\n      this.getCropChecked(data => {\n        data.toBlob(\n          blob => cb(blob),\n          \"image/\" + this.outputType,\n          this.outputSize\n        );\n      });\n    },\n\n    // 自动预览函数\n    showPreview() {\n      // 优化不要多次触发\n      if (this.isCanShow) {\n        this.isCanShow = false;\n        setTimeout(() => {\n          this.isCanShow = true;\n        }, 16);\n      } else {\n        return false;\n      }\n      let w = this.cropW;\n      let h = this.cropH;\n      let scale = this.scale;\n      var obj = {};\n      obj.div = {\n        width: `${w}px`,\n        height: `${h}px`\n      };\n      let transformX = (this.x - this.cropOffsertX) / scale;\n      let transformY = (this.y - this.cropOffsertY) / scale;\n      let transformZ = 0;\n      obj.w = w;\n      obj.h = h;\n      obj.url = this.imgs;\n      obj.img = {\n        width: `${this.trueWidth}px`,\n        height: `${this.trueHeight}px`,\n        transform: `scale(${scale})translate3d(${transformX}px, ${transformY}px, ${transformZ}px)rotateZ(${this\n          .rotate * 90}deg)`\n      };\n      obj.html = `\n      <div class=\"show-preview\" style=\"width: ${obj.w}px; height: ${\n        obj.h\n      }px,; overflow: hidden\">\n        <div style=\"width: ${w}px; height: ${h}px\">\n          <img src=${obj.url} style=\"width: ${this.trueWidth}px; height: ${\n        this.trueHeight\n      }px; transform:\n          scale(${scale})translate3d(${transformX}px, ${transformY}px, ${transformZ}px)rotateZ(${this\n        .rotate * 90}deg)\">\n        </div>\n      </div>`;\n      this.$emit(\"realTime\", obj);\n      this.$emit(\"real-time\", obj);\n    },\n    // reload 图片布局函数\n    reload() {\n      let img = new Image();\n      img.onload = () => {\n        // 读取图片的信息原始信息， 解析是否需要旋转\n        // 读取图片的旋转信息\n        // 得到外层容器的宽度高度\n        this.w = parseFloat(window.getComputedStyle(this.$refs.cropper).width);\n        this.h = parseFloat(window.getComputedStyle(this.$refs.cropper).height);\n\n        // 存入图片真实高度\n        this.trueWidth = img.width;\n        this.trueHeight = img.height;\n\n        // 判断是否需要压缩大图\n        if (!this.original) {\n          // 判断布局方式 mode\n          this.scale = this.checkedMode();\n        } else {\n          this.scale = 1;\n        }\n\n        this.$nextTick(() => {\n          this.x =\n            -(this.trueWidth - this.trueWidth * this.scale) / 2 +\n            (this.w - this.trueWidth * this.scale) / 2;\n          this.y =\n            -(this.trueHeight - this.trueHeight * this.scale) / 2 +\n            (this.h - this.trueHeight * this.scale) / 2;\n          this.loading = false;\n          // // 获取是否开启了自动截图\n          if (this.autoCrop) {\n            this.goAutoCrop();\n          }\n          // 图片加载成功的回调\n          this.$emit(\"img-load\", \"success\");\n          this.$emit(\"imgLoad\", \"success\");        \n          setTimeout(() => {\n            this.showPreview();\n          }, 20);\n        });\n      };\n      img.onerror = () => {\n        this.$emit(\"imgLoad\", \"error\");\n        this.$emit(\"img-load\", \"error\");\n      };\n      img.src = this.imgs;\n    },\n    // 背景布局的函数\n    checkedMode() {\n      let scale = 1;\n      // 通过字符串分割\n      let imgW = this.trueWidth;\n      let imgH = this.trueHeight;\n      const arr = this.mode.split(\" \");\n      switch (arr[0]) {\n        case \"contain\":\n          if (this.trueWidth > this.w) {\n            // 如果图片宽度大于容器宽度\n            scale = this.w / this.trueWidth;\n          }\n\n          if (this.trueHeight * scale > this.h) {\n            scale = this.h / this.trueHeight;\n          }\n          break;\n        case \"cover\":\n          // 扩展布局 默认填充满整个容器\n          // 图片宽度大于容器\n          imgW = this.w;\n          scale = imgW / this.trueWidth;\n          imgH = imgH * scale;\n          // 如果扩展之后高度小于容器的外层高度 继续扩展高度\n          if (imgH < this.h) {\n            imgH = this.h;\n            scale = imgH / this.trueHeight;\n          }\n          break;\n        default:\n          try {\n            let str = arr[0];\n            if (str.search(\"px\") !== -1) {\n              str = str.replace(\"px\", \"\");\n              imgW = parseFloat(str);\n              const scaleX = imgW / this.trueWidth;\n              let scaleY = 1;\n              let strH = arr[1];\n              if (strH.search(\"px\") !== -1) {\n                strH = strH.replace(\"px\", \"\");\n                imgH = parseFloat(strH);\n                scaleY = imgH / this.trueHeight;\n              }\n              scale = Math.min(scaleX,scaleY)\n\n            }\n            if (str.search(\"%\") !== -1) {\n              str = str.replace(\"%\", \"\");\n              imgW = (parseFloat(str) / 100) * this.w;\n              scale = imgW / this.trueWidth;\n            }\n\n            if (arr.length === 2 && str === \"auto\") {\n              let str2 = arr[1];\n              if (str2.search(\"px\") !== -1) {\n                str2 = str2.replace(\"px\", \"\");\n                imgH = parseFloat(str2);\n                scale = imgH / this.trueHeight;\n              }\n              if (str2.search(\"%\") !== -1) {\n                str2 = str2.replace(\"%\", \"\");\n                imgH = (parseFloat(str2) / 100) * this.h;\n                scale = imgH / this.trueHeight;\n              }\n            }\n          } catch (error) {\n            scale = 1;\n          }\n      }\n      return scale;\n    },\n    // 自动截图函数\n    goAutoCrop(cw, ch) {\n      if (this.imgs === '' || this.imgs === null) return\n      this.clearCrop();\n      this.cropping = true;\n      let maxWidth = this.w;\n      let maxHeight = this.h;\n      if (this.centerBox) {\n        const switchWH = Math.abs(this.rotate) % 2 > 0\n        let imgW = (switchWH ? this.trueHeight : this.trueWidth) * this.scale;\n        let imgH = (switchWH ? this.trueWidth : this.trueHeight) * this.scale;\n        maxWidth = imgW < maxWidth ? imgW : maxWidth;\n        maxHeight = imgH < maxHeight ? imgH : maxHeight;\n      }\n      // 截图框默认大小\n      // 如果为0 那么计算容器大小 默认为80%\n      var w = cw ? cw : parseFloat(this.autoCropWidth);\n      var h = ch ? ch : parseFloat(this.autoCropHeight);\n      if (w === 0 || h === 0) {\n        w = maxWidth * 0.8;\n        h = maxHeight * 0.8;\n      }\n      w = w > maxWidth ? maxWidth : w;\n      h = h > maxHeight ? maxHeight : h;\n      if (this.fixed) {\n        h = (w / this.fixedNumber[0]) * this.fixedNumber[1];\n      }\n      // 如果比例之后 高度大于h\n      if (h > this.h) {\n        h = this.h;\n        w = (h / this.fixedNumber[1]) * this.fixedNumber[0];\n      }\n      this.changeCrop(w, h);\n    },\n    // 手动改变截图框大小函数\n    changeCrop(w, h) {\n      if (this.centerBox) {\n        // 修复初始化时候在centerBox=true情况下\n        let axis = this.getImgAxis();\n        if (w > axis.x2 - axis.x1) {\n          // 宽度超标\n          w = axis.x2 - axis.x1;\n          h = (w / this.fixedNumber[0]) * this.fixedNumber[1];\n        }\n        if (h > axis.y2 - axis.y1) {\n          // 高度超标\n          h = axis.y2 - axis.y1;\n          w = (h / this.fixedNumber[1]) * this.fixedNumber[0];\n        }\n      }\n      // 判断是否大于容器\n      this.cropW = w;\n      this.cropH = h;\n      this.checkCropLimitSize()\n      this.$nextTick(() => {\n        // 居中走一走\n        this.cropOffsertX = (this.w - this.cropW) / 2;\n        this.cropOffsertY = (this.h - this.cropH) / 2;\n        if (this.centerBox) {\n          this.moveCrop(null, true);\n        }\n      });\n    },\n    // 重置函数， 恢复组件置初始状态\n    refresh() {\n      let img = this.img;\n      this.imgs = \"\";\n      this.scale = 1;\n      this.crop = false;\n      this.rotate = 0;\n      this.w = 0;\n      this.h = 0;\n      this.trueWidth = 0;\n      this.trueHeight = 0;\n      this.clearCrop();\n      this.$nextTick(() => {\n        this.checkedImg();\n      });\n    },\n\n    // 向左边旋转\n    rotateLeft() {\n      this.rotate = this.rotate <= -3 ? 0 : this.rotate - 1;\n    },\n\n    // 向右边旋转\n    rotateRight() {\n      this.rotate = this.rotate >= 3 ? 0 : this.rotate + 1;\n    },\n\n    // 清除旋转\n    rotateClear() {\n      this.rotate = 0;\n    },\n\n    // 图片坐标点校验\n    checkoutImgAxis(x, y, scale) {\n      x = x || this.x;\n      y = y || this.y;\n      scale = scale || this.scale;\n      let canGo = true;\n      // 开始校验 如果说缩放之后的坐标在截图框外 则阻止缩放\n      if (this.centerBox) {\n        let axis = this.getImgAxis(x, y, scale);\n        let cropAxis = this.getCropAxis();\n        // 左边的横坐标 图片不能超过截图框\n        if (axis.x1 >= cropAxis.x1) {\n          canGo = false;\n        }\n\n        // 右边横坐标\n        if (axis.x2 <= cropAxis.x2) {\n          canGo = false;\n        }\n\n        // 纵坐标上面\n        if (axis.y1 >= cropAxis.y1) {\n          canGo = false;\n        }\n\n        // 纵坐标下面\n        if (axis.y2 <= cropAxis.y2) {\n          canGo = false;\n        }\n      }\n      return canGo;\n    }\n  },\n  mounted() {\n    this.support =\n      \"onwheel\" in document.createElement(\"div\")\n        ? \"wheel\"\n        : document.onmousewheel !== undefined\n        ? \"mousewheel\"\n        : \"DOMMouseScroll\";\n    let that = this;\n    var u = navigator.userAgent;\n    this.isIOS = !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/);\n    // 兼容blob\n    if (!HTMLCanvasElement.prototype.toBlob) {\n      Object.defineProperty(HTMLCanvasElement.prototype, \"toBlob\", {\n        value: function(callback, type, quality) {\n          var binStr = atob(this.toDataURL(type, quality).split(\",\")[1]),\n            len = binStr.length,\n            arr = new Uint8Array(len);\n          for (var i = 0; i < len; i++) {\n            arr[i] = binStr.charCodeAt(i);\n          }\n          callback(new Blob([arr], { type: that.type || \"image/png\" }));\n        }\n      });\n    }\n    this.showPreview();\n    this.checkedImg();\n  },\n  destroyed() {\n    window.removeEventListener(\"mousemove\", this.moveCrop);\n    window.removeEventListener(\"mouseup\", this.leaveCrop);\n    window.removeEventListener(\"touchmove\", this.moveCrop);\n    window.removeEventListener(\"touchend\", this.leaveCrop);\n    this.cancelScale()\n  }\n};\n</script>\n\n<style scoped lang=\"css\">\n.vue-cropper {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  user-select: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  direction: ltr;\n  touch-action: none;\n  text-align: left;\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC\");\n}\n\n.cropper-box,\n.cropper-box-canvas,\n.cropper-drag-box,\n.cropper-crop-box,\n.cropper-face {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  user-select: none;\n}\n\n.cropper-box-canvas img {\n  position: relative;\n  text-align: left;\n  user-select: none;\n  transform: none;\n  max-width: none;\n  max-height: none;\n}\n\n.cropper-box {\n  overflow: hidden;\n}\n\n.cropper-move {\n  cursor: move;\n}\n\n.cropper-crop {\n  cursor: crosshair;\n}\n\n.cropper-modal {\n  background: rgba(0, 0, 0, 0.5);\n}\n\n.cropper-crop-box {\n  /*border: 2px solid #39f;*/\n}\n\n.cropper-view-box {\n  display: block;\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  outline: 1px solid #39f;\n  outline-color: rgba(51, 153, 255, 0.75);\n  user-select: none;\n}\n\n.cropper-view-box img {\n  user-select: none;\n  text-align: left;\n  max-width: none;\n  max-height: none;\n}\n\n.cropper-face {\n  top: 0;\n  left: 0;\n  background-color: #fff;\n  opacity: 0.1;\n}\n\n.crop-info {\n  position: absolute;\n  left: 0px;\n  min-width: 65px;\n  text-align: center;\n  color: white;\n  line-height: 20px;\n  background-color: rgba(0, 0, 0, 0.8);\n  font-size: 12px;\n}\n\n.crop-line {\n  position: absolute;\n  display: block;\n  width: 100%;\n  height: 100%;\n  opacity: 0.1;\n}\n\n.line-w {\n  top: -3px;\n  left: 0;\n  height: 5px;\n  cursor: n-resize;\n}\n\n.line-a {\n  top: 0;\n  left: -3px;\n  width: 5px;\n  cursor: w-resize;\n}\n\n.line-s {\n  bottom: -3px;\n  left: 0;\n  height: 5px;\n  cursor: s-resize;\n}\n\n.line-d {\n  top: 0;\n  right: -3px;\n  width: 5px;\n  cursor: e-resize;\n}\n\n.crop-point {\n  position: absolute;\n  width: 8px;\n  height: 8px;\n  opacity: 0.75;\n  background-color: #39f;\n  border-radius: 100%;\n}\n\n.point1 {\n  top: -4px;\n  left: -4px;\n  cursor: nw-resize;\n}\n\n.point2 {\n  top: -5px;\n  left: 50%;\n  margin-left: -3px;\n  cursor: n-resize;\n}\n\n.point3 {\n  top: -4px;\n  right: -4px;\n  cursor: ne-resize;\n}\n\n.point4 {\n  top: 50%;\n  left: -4px;\n  margin-top: -3px;\n  cursor: w-resize;\n}\n\n.point5 {\n  top: 50%;\n  right: -4px;\n  margin-top: -3px;\n  cursor: e-resize;\n}\n\n.point6 {\n  bottom: -5px;\n  left: -4px;\n  cursor: sw-resize;\n}\n\n.point7 {\n  bottom: -5px;\n  left: 50%;\n  margin-left: -3px;\n  cursor: s-resize;\n}\n\n.point8 {\n  bottom: -5px;\n  right: -4px;\n  cursor: se-resize;\n}\n\n@media screen and (max-width: 500px) {\n  .crop-point {\n    position: absolute;\n    width: 20px;\n    height: 20px;\n    opacity: 0.45;\n    background-color: #39f;\n    border-radius: 100%;\n  }\n\n  .point1 {\n    top: -10px;\n    left: -10px;\n  }\n\n  .point2,\n  .point4,\n  .point5,\n  .point7 {\n    display: none;\n  }\n\n  .point3 {\n    top: -10px;\n    right: -10px;\n  }\n\n  .point4 {\n    top: 0;\n    left: 0;\n  }\n\n  .point6 {\n    bottom: -10px;\n    left: -10px;\n  }\n\n  .point8 {\n    bottom: -10px;\n    right: -10px;\n  }\n}\n</style>\n","import mod from \"-!../../cache-loader/dist/cjs.js??ref--12-0!../../thread-loader/dist/cjs.js!../../babel-loader/lib/index.js!../../cache-loader/dist/cjs.js??ref--0-0!../../vue-loader/lib/index.js??vue-loader-options!./vue-cropper.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../cache-loader/dist/cjs.js??ref--12-0!../../thread-loader/dist/cjs.js!../../babel-loader/lib/index.js!../../cache-loader/dist/cjs.js??ref--0-0!../../vue-loader/lib/index.js??vue-loader-options!./vue-cropper.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./vue-cropper.vue?vue&type=template&id=52b05bc2&scoped=true&\"\nimport script from \"./vue-cropper.vue?vue&type=script&lang=js&\"\nexport * from \"./vue-cropper.vue?vue&type=script&lang=js&\"\nimport style0 from \"./vue-cropper.vue?vue&type=style&index=0&id=52b05bc2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"52b05bc2\",\n  null\n  \n)\n\nexport default component.exports","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","export * from \"-!../../mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../vue-loader/lib/loaders/stylePostLoader.js!../../postcss-loader/src/index.js??ref--6-oneOf-1-2!../../cache-loader/dist/cjs.js??ref--0-0!../../vue-loader/lib/index.js??vue-loader-options!./vue-cropper.vue?vue&type=style&index=0&id=52b05bc2&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VueCropper.vue?vue&type=style&index=0&lang=css&\"","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar arrayBufferModule = require('../internals/array-buffer');\nvar setSpecies = require('../internals/set-species');\n\nvar ARRAY_BUFFER = 'ArrayBuffer';\nvar ArrayBuffer = arrayBufferModule[ARRAY_BUFFER];\nvar NativeArrayBuffer = global[ARRAY_BUFFER];\n\n// `ArrayBuffer` constructor\n// https://tc39.es/ecma262/#sec-arraybuffer-constructor\n$({ global: true, forced: NativeArrayBuffer !== ArrayBuffer }, {\n  ArrayBuffer: ArrayBuffer\n});\n\nsetSpecies(ARRAY_BUFFER);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._m(0),_vm._v(\" \"),_c('hr',{staticClass:\"container-m-nx border-light mt-0 mb-4\"}),_vm._v(\" \"),_c('b-modal',{attrs:{\"ok-only\":true,\"ok-title\":\"Close\",\"ok-variant\":\"secondary\",\"hide-header\":true},model:{value:(_vm.previewOpened),callback:function ($$v) {_vm.previewOpened=$$v},expression:\"previewOpened\"}},[_c('img',{staticClass:\"img-fluid d-block mx-auto\",attrs:{\"src\":_vm.previewData,\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"mb-3\",class:{ 'd-none': !_vm.image },staticStyle:{\"height\":\"500px\"}},[_c('vueCropper',{ref:\"cropper\",attrs:{\"img\":_vm.image,\"outputSize\":_vm.outputSize,\"outputType\":_vm.outputType,\"info\":true},on:{\"realTime\":_vm.realTimePreview}})],1),_vm._v(\" \"),_c('div',{staticClass:\"demo-inline-spacing\"},[_c('label',{staticClass:\"btn btn-primary\",attrs:{\"for\":\"cropper-upload\"}},[_c('input',{staticClass:\"sr-only\",attrs:{\"type\":\"file\",\"id\":\"cropper-upload\",\"accept\":\"image/png, image/jpeg, image/gif, image/jpg\"},on:{\"change\":function($event){return _vm.uploadImg($event)}}}),_vm._v(\"\\n      Upload\\n    \")]),_vm._v(\" \"),(!_vm.cropping)?_c('b-btn',{attrs:{\"disabled\":!_vm.image},on:{\"click\":_vm.startCrop}},[_vm._v(\"Start cropping\")]):_c('b-btn',{attrs:{\"disabled\":!_vm.image},on:{\"click\":_vm.stopCrop}},[_vm._v(\"Stop cropping\")]),_vm._v(\" \"),_c('b-btn',{attrs:{\"disabled\":!_vm.image},on:{\"click\":_vm.clearCrop}},[_vm._v(\"Clear\")]),_vm._v(\" \"),_c('b-btn',{attrs:{\"disabled\":!_vm.image},on:{\"click\":function($event){return _vm.changeScale(1)}}},[_vm._v(\"+\")]),_vm._v(\" \"),_c('b-btn',{attrs:{\"disabled\":!_vm.image},on:{\"click\":function($event){return _vm.changeScale(-1)}}},[_vm._v(\"-\")]),_vm._v(\" \"),_c('b-btn',{attrs:{\"disabled\":!_vm.image},on:{\"click\":_vm.rotateLeft}},[_vm._v(\"rotateLeft\")]),_vm._v(\" \"),_c('b-btn',{attrs:{\"disabled\":!_vm.image},on:{\"click\":_vm.rotateRight}},[_vm._v(\"rotateRight\")]),_vm._v(\" \"),_c('b-btn',{attrs:{\"disabled\":!_vm.image},on:{\"click\":function($event){return _vm.previewImg('base64')}}},[_vm._v(\"Preview Base64\")]),_vm._v(\" \"),_c('b-btn',{attrs:{\"disabled\":!_vm.image},on:{\"click\":function($event){return _vm.previewImg('blob')}}},[_vm._v(\"Preview Blob\")]),_vm._v(\" \"),_c('b-btn',{attrs:{\"disabled\":!_vm.image},on:{\"click\":function($event){return _vm.downloadImg('base64')}}},[_vm._v(\"Download Base64\")]),_vm._v(\" \"),_c('b-btn',{attrs:{\"disabled\":!_vm.image},on:{\"click\":function($event){return _vm.downloadImg('blob')}}},[_vm._v(\"Download Blob\")]),_vm._v(\" \"),_c('b-form-group',{staticClass:\"mt-3\",attrs:{\"label\":\"Output type\"}},[_c('b-radio-group',{attrs:{\"disabled\":!_vm.image,\"options\":[{ text: 'jpeg', value: 'jpeg' }, { text: 'png', value: 'png' }, { text: 'webp', value: 'webp' }]},model:{value:(_vm.outputType),callback:function ($$v) {_vm.outputType=$$v},expression:\"outputType\"}})],1),_vm._v(\" \"),_c('div',{style:({'width': _vm.previews.w + 'px', 'height': _vm.previews.h + 'px', 'overflow': 'hidden', 'margin': '5px'})},[_c('div',{style:(_vm.previews.div)},[_c('img',{style:(_vm.previews.img),attrs:{\"src\":_vm.previews.url}})])])],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h4',{staticClass:\"font-weight-bold py-3 mb-4\"},[_c('span',{staticClass:\"text-muted font-weight-light\"},[_vm._v(\"UI elements /\")]),_vm._v(\" Vue Cropper\\n  \")])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <h4 class=\"font-weight-bold py-3 mb-4\">\n      <span class=\"text-muted font-weight-light\">UI elements /</span> Vue Cropper\n    </h4>\n\n    <hr class=\"container-m-nx border-light mt-0 mb-4\">\n\n    <b-modal v-model=\"previewOpened\" :ok-only=\"true\" ok-title=\"Close\" ok-variant=\"secondary\" :hide-header=\"true\">\n      <img :src=\"previewData\" alt=\"\" class=\"img-fluid d-block mx-auto\">\n    </b-modal>\n\n    <div class=\"mb-3\" :class=\"{ 'd-none': !image }\" style=\"height: 500px;\">\n      <vueCropper\n        ref=\"cropper\"\n        :img=\"image\"\n        :outputSize=\"outputSize\"\n        :outputType=\"outputType\"\n        :info=\"true\"\n        @realTime=\"realTimePreview\" />\n    </div>\n\n    <div class=\"demo-inline-spacing\">\n      <label class=\"btn btn-primary\" for=\"cropper-upload\">\n        <input class=\"sr-only\" type=\"file\" id=\"cropper-upload\" accept=\"image/png, image/jpeg, image/gif, image/jpg\" @change=\"uploadImg($event)\">\n        Upload\n      </label>\n\n      <b-btn @click=\"startCrop\" v-if=\"!cropping\" :disabled=\"!image\">Start cropping</b-btn>\n      <b-btn @click=\"stopCrop\" v-else :disabled=\"!image\">Stop cropping</b-btn>\n      <b-btn @click=\"clearCrop\" :disabled=\"!image\">Clear</b-btn>\n\n      <b-btn @click=\"changeScale(1)\" :disabled=\"!image\">+</b-btn>\n      <b-btn @click=\"changeScale(-1)\" :disabled=\"!image\">-</b-btn>\n\n      <b-btn @click=\"rotateLeft\" :disabled=\"!image\">rotateLeft</b-btn>\n      <b-btn @click=\"rotateRight\" :disabled=\"!image\">rotateRight</b-btn>\n\n      <b-btn @click=\"previewImg('base64')\" :disabled=\"!image\">Preview Base64</b-btn>\n      <b-btn @click=\"previewImg('blob')\" :disabled=\"!image\">Preview Blob</b-btn>\n\n      <b-btn @click=\"downloadImg('base64')\" :disabled=\"!image\">Download Base64</b-btn>\n      <b-btn @click=\"downloadImg('blob')\" :disabled=\"!image\">Download Blob</b-btn>\n\n      <b-form-group label=\"Output type\" class=\"mt-3\">\n        <b-radio-group v-model=\"outputType\" :disabled=\"!image\" :options=\"[{ text: 'jpeg', value: 'jpeg' }, { text: 'png', value: 'png' }, { text: 'webp', value: 'webp' }]\" />\n      </b-form-group>\n\n      <div :style=\"{'width': previews.w + 'px', 'height': previews.h + 'px', 'overflow': 'hidden', 'margin': '5px'}\">\n        <div :style=\"previews.div\">\n          <img :src=\"previews.url\" :style=\"previews.img\">\n        </div>\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<style>\n.dark-style .vue-cropper {\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAFo9M/3AAAABGdBTUEAALGPC/xhBQAAAH9JREFUOBHFkrkNgDAMRRPEHkCBRMX+2wCTAB/pRcgGuUgRF/H1fSfPy3pO45A6Pdt+pPxtSTcJIuoRhBc9MRJwdFLe5EIcouQgjFzoLgIHvNTAQHvoYYb6HsISIaB+irBECHB7YINwexvs8LACwD/ePoG7g23V/i7rbz9CdQcXzGsiNjZUoNMAAAAASUVORK5CYII=');\n}\n</style>\n\n<script>\nimport vueCropper from 'vue-cropper/src/vue-cropper'\n\nexport default {\n  name: 'ui-vue-cropper',\n  metaInfo: {\n    title: 'Vue Cropper - UI elements'\n  },\n  components: {\n    vueCropper\n  },\n  data: () => ({\n    image: '',\n    outputSize: 1,\n    outputType: 'jpeg',\n    previews: {},\n    cropping: false,\n    previewData: null,\n    previewOpened: false\n  }),\n  mounted () {\n    this.image = `${this.publicUrl}img/bg/13.jpg`\n  },\n  methods: {\n    startCrop () {\n      this.cropping = true\n      this.$refs.cropper.startCrop()\n    },\n\n    stopCrop () {\n      this.cropping = false\n      this.$refs.cropper.stopCrop()\n    },\n\n    clearCrop () {\n      this.$refs.cropper.clearCrop()\n    },\n\n    changeScale (num) {\n      this.$refs.cropper.changeScale(num || 1)\n    },\n\n    rotateLeft () {\n      this.$refs.cropper.rotateLeft()\n    },\n\n    rotateRight () {\n      this.$refs.cropper.rotateRight()\n    },\n\n    realTimePreview (data) {\n      this.previews = data\n    },\n\n    previewImg (type) {\n      if (type === 'blob') {\n        this.$refs.cropper.getCropBlob((data) => {\n          var img = window.URL.createObjectURL(data)\n          this.previewData = img\n          this.previewOpened = true\n        })\n      } else {\n        this.$refs.cropper.getCropData((data) => {\n          this.previewData = data\n          this.previewOpened = true\n        })\n      }\n    },\n\n    downloadImg (type) {\n      var aLink = document.createElement('a')\n      aLink.download = 'demo'\n\n      if (type === 'blob') {\n        this.$refs.cropper.getCropBlob((data) => {\n          this.downloadImgData = window.URL.createObjectURL(data)\n          aLink.href = window.URL.createObjectURL(data)\n          aLink.click()\n        })\n      } else {\n        this.$refs.cropper.getCropData((data) => {\n          this.downloadImgData = data\n          aLink.href = data\n          aLink.click()\n        })\n      }\n    },\n\n    uploadImg (e) {\n      var file = e.target.files[0]\n      if (!/\\.(gif|jpg|jpeg|png|bmp|GIF|JPG|PNG)$/.test(e.target.value)) {\n        alert('Unknown image extension. Allowed extensions: gif, jpeg, jpg, png, bmp')\n        return false\n      }\n      var reader = new FileReader()\n      reader.onload = (e) => {\n        let data\n        if (typeof e.target.result === 'object') {\n          data = window.URL.createObjectURL(new Blob([e.target.result]))\n        } else {\n          data = e.target.result\n        }\n        this.image = data\n      }\n      reader.readAsArrayBuffer(file)\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VueCropper.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VueCropper.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VueCropper.vue?vue&type=template&id=0e627521&\"\nimport script from \"./VueCropper.vue?vue&type=script&lang=js&\"\nexport * from \"./VueCropper.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VueCropper.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}